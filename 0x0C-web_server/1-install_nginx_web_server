#!/bin/bash

# Update package index
apt-get update

# Install Nginx with -y flag to avoid interactive prompts
apt-get install -y nginx

# Check if Nginx is installed successfully
if [ $? -ne 0 ]; then
    echo "Nginx installation failed."
    exit 1
fi

# Configure Nginx to serve "Hello World!" at root
echo 'Hello World!' > /var/www/html/index.html

# Restart Nginx (without using systemctl)
service nginx restart >/dev/null 2>&1 || /etc/init.d/nginx restart >/dev/null 2>&1

# Check if Nginx is running
netstat -tuln | grep ':80' >/dev/null
if [ $? -ne 0 ]; then
    echo "Nginx failed to start or is not listening on port 80."
    exit 1
fi

echo "Nginx is installed and configured successfully."

